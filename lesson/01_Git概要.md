# Gitの概要
## Gitとは
プログラムのソースコードなどの変更履歴を記録・追跡するための分散型バージョン管理システムのこと。


## 分散型バージョン管理システムとは

### 1.バージョン管理ってなに？
コンピュータ上で作成、編集されるファイルの変更履歴を管理すること。
特にソフトウェア開発においてソースコードの管理に用いられることが多い。

### 2.バージョン管理システムの必要性
#### 利点
バージョン管理の必要性を利点から見ていきます。

##### ①ファイルに対して「誰が」「いつ」「何を変更したか」というような情報を記録する
→複数人でソースコードを編集しても誰がどのような編集を加えたかすぐに分かる

##### ②過去のある時点の状態を復元できる
→間違ってバグを埋め込んでしまった場合でも、すぐにバグを埋め込む前の状態に戻せる

##### ③変更内容の差分を表示できる
→ソースコードを編集後、編集した内容が間違ってないかすぐに確認できる

__なので、ソフトウェア開発ではバージョン管理はほぼ必須であり、何かしらのバージョンシステムを導入しています。__

### 3.分散型ってなに？

#### 分散型と集中型
Gitは分散型バージョン管理システムです。分散型とはどういうバージョン管理システムかを、集中型と比較して説明します。

##### ●集中型バージョン管理システム
SVN、CVSと呼ばれるバージョン管理システムがこれに当たります。今回はSVNで説明します。

##### 図：集中型バージョン管理システム（SVN）
![image](https://raw.githubusercontent.com/chokaigi/git_lesson/master/lesson/images/svn.png)

サーバーに開発者複数人で共有する場所（リポジトリ）を1つ用意し、そこにソースコードを置きます。
開発者は、リポジトリからソースをPCのローカルに取得し、それに修正を加えて修正内容を中央リポジトリに反映します。


但し、集中型のバージョン管理システムには欠点があります。
中央リポジトリのサーバに接続できない環境の場合、最新のソースコードを取得やソースコードを編集した内容を反映できません。

##### ●分散型バージョン管理システム
Gitがこれに当たります。

##### 図：分散型バージョン管理システム（Git）
![image](https://raw.githubusercontent.com/chokaigi/git_lesson/master/lesson/images/git.png)

Gitはリポジトリを複数持つことができ、開発の形態や規模に合わせてソースコードの管理ができます。リポジトリを複数用意できるので「分散型」と呼ばれています。
サーバーにもリポジトリ（リモートリポジトリ）を置きますが、開発者それぞれがPCのローカルにリポジトリ（ローカルリポジトリ）を持つという構成をとります。
この場合、普段はローカルリポジトリを使って作業し、ある程度作業できたらサーバーのリモートリポジトリに反映するといった使い方ができます。

利点は、リモートリポジトリにアクセスできない環境でも作業を進めることができるところです。

## Gitの仕組み

### 1.ローカルリポジトリの３つのデータ領域での管理

ローカルリポジトリは3つのデータ領域でソースコードを管理しています。

#### 図：作業ディレクトリ/ステージングエリア/Gitディレクトリ
![image](https://raw.githubusercontent.com/chokaigi/git_lesson/master/lesson/images/3data_area.png)

#### ①作業ディレクトリ
名前の通り、作業する領域です。実際にソースコードを修正する領域になります。

#### ②ステージングエリア
ローカルリポジトリに反映(commit)するために、準備するエリアです。
一旦ステージングエリアに準備してからコミットします。
①の作業ディレクトリで修正を加えたソースコードをすぐにローカルリポジトリにコミットするのではなく、一旦ステージングエリアで準備することにより、コミットミスも防ぐことができます。

#### ③リポジトリ
リモートリポジトリに送るためのコミット（2でcommitした単位の変更）を溜めておく場所です。

### 2.コミットはハッシュ値を使って管理されている
コミット（commitした単位の変更内容）は、ハッシュ値を使って管理されています。
ハッシュ値は、コミットの情報を元にハッシュ関数（SHA-1）で計算された重複のない英数字40桁で、各コミットに割り振られます。

#### 図：コミットとハッシュ値

![image](https://raw.githubusercontent.com/chokaigi/git_lesson/master/lesson/images/hash.png)

### 3.ブランチについて

ソフトウェアの開発では、同じシステムであっても別機能の開発が同時並行で行われたりします。
このような並行して行われる開発のソースコードのバージョン管理を支援するため、Gitにはブランチという機能が備わっています。

ブランチは、履歴の流れを分岐して記録していくためのもので、大元のソースから分岐したブランチを作成して進めていきます。
分岐したブランチは他のブランチの影響を受けないため、同じリポジトリ中で複数の変更を同時に進めていくことができます。

#### 図：ブランチ

![image](https://raw.githubusercontent.com/chokaigi/git_lesson/master/lesson/images/branch.png)

#### ①統合ブランチ
大元のブランチです。
gitでは最初に大元のソースがmasterブランチとなりますのでmasterブランチが統合ブランチになります。

#### ②トピックブランチ
機能追加やバグ修正といったある課題に関する作業を行うために作成するブランチです。
新規機能開発やバグ修正などの対応を始めると時に作成します。対応後は最終的に統合ブランチに反映（マージ）されます。


## 今日の理解度チェック（講義の感想を聞くアンケートの中に追加しても良いかも？）

1. SVNの集中型のバージョン管理システムであるのに対し、Gitは何型のバージョン管理システムになりますか？
* gitは２つのリポジトリに分かれて運用されますが、それは何リポジトリと何リポジトリですか？
* ローカルリポジトリの３つのデータ領域は何ですか？
* ステージングエリアにあるものをローカルリポジトリに反映することを何といいますか？
* コミットは何が割り振られ管理されていますか?
* 並行して行われる開発のソースコードのバージョン管理を支援するためのGitの機能は何ですか？
* 統合ブランチは通常は何ブランチですか？
* 機能追加やバグ修正といったある課題に関する作業を行うために何ブランチを作りますか？
* 修正したソースコードを統合ブランチに反映することを何といいますか？
* ブランチの最新の状態を何と言いますか？

## 参考
http://www.atmarkit.co.jp/ait/articles/1307/05/news028_3.html
http://www.slideshare.net/matsukaz/git-28304397
https://www.atlassian.com/ja/git/workflows#!workflow-gitflow
